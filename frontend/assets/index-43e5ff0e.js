import{e as l,r,j as e,K as x}from"./index-f30d1f44.js";import{b as d}from"./comment.api-3ee8cf9b.js";import{t as p}from"./time-629d643e.js";function g(){const{socket:o,userInfo:i}=l(),[s,a]=r.useState([]);r.useEffect(()=>(o.emit("join-room-comment-tiktok",{userId:i.id}),o.on("comment-tiktok",t=>{console.log(t),!s.find(m=>m.postId==t.postId&&m.commentCreatedAt==t.commentCreatedAt)&&(s.length==50&&s.pop(),s.unshift(t),a([...s]))}),()=>{o.emit("leave-room-comment-tiktok"),o.off("comment-group")}),[o]),r.useEffect(()=>{(async()=>{const t=await d();a(t.data)})()},[]);const c=t=>{window.open(`https://www.tiktok.com/@dangnamtravelblog/video/${t}`,"_blank")};return e.jsx("div",{className:"p-4 flex flex-col gap-4",children:s.map((t,n)=>e.jsxs("div",{className:`rounded-2xl shadow-md p-4 flex flex-col gap-2 ${n===0||n===2?"bg-cyan-100":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"font-semibold text-lg text-gray-800",children:[t.userNameComment,e.jsxs("span",{children:["(",p(t.commentCreatedAt),")"]})]}),e.jsx("span",{className:"text-blue-600 font-bold",children:"Tiktok"})]}),e.jsx("div",{className:"text-sm text-gray-600"}),e.jsx("p",{className:"text-gray-800 text-sm sm:text-base",children:t.commentMessage}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[e.jsx("button",{className:"flex items-center gap-1 px-3 py-1 rounded-xl bg-pink-100 hover:bg-pink-200",children:"Gọi"}),e.jsx("button",{className:"flex items-center gap-1 px-3 py-1 rounded-xl bg-gray-100 hover:bg-gray-200",children:"Nhắn"}),e.jsx("button",{className:"flex items-center gap-1 px-3 py-1 rounded-xl bg-gray-100 hover:bg-gray-200",onClick:()=>{c(t.postId)},children:"Xem"}),e.jsx("button",{className:"p-2 rounded-xl bg-gray-100 hover:bg-gray-200"})]})]},n))})}function h(){return e.jsx(x,{children:e.jsx(g,{})})}export{h as default};
