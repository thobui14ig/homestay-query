import{h as k,r as n,j as t,Q as m,e as g,K as T}from"./index-0db84d6a.js";import{T as f,u as j,a as A,b as C,I as M,B as b,S as R,M as S}from"./index.esm-c360f4a7.js";import{M as O,c as y,D as I}from"./toast-1c981d54.js";import"./motion-582f0d84.js";const w=e=>k.post("/tokens",e),B=()=>k.get("/tokens"),D=e=>k.delete(`/tokens/${e}`);var x=(e=>(e[e.CRAWL_CMT=1]="CRAWL_CMT",e[e.GET_INFO=2]="GET_INFO",e))(x||{});const _=({setIsModalOpen:e,isModalOpen:l,isReload:c,setIsReload:i})=>{const[d,o]=n.useState(""),u=async()=>{if(d.length===0){m.error("Nội dung không được trống!");return}const r=d.split(`
`).map(s=>s.trim()).filter(s=>s.length>0).map(s=>s);try{const s=await w({tokens:r,type:x.GET_INFO});o(""),e(!1),i(!c),m(s.data.message)}catch(s){y(s)}},h=()=>u();return t.jsx(O,{title:"Add tokens",closable:{"aria-label":"Custom Close Button"},open:l,onOk:()=>h(),onCancel:()=>e(!1),children:t.jsx(f,{onChange:r=>{o(r.target.value)},rows:4})})};function v(){const{optionsReactTableDefault:e}=g(),[l,c]=n.useState(!1),[i,d]=n.useState(null),[o,u]=n.useState(!1);n.useEffect(()=>{(async()=>{const a=await B();d(a.data)})()},[o]);const h=async a=>{m("Xóa thành công!"),await D(a),u(!o)},r=n.useMemo(()=>[{header:"Value",accessorKey:"tokenValue",Cell:a=>{const p=a.row.original.tokenValue;return p&&p.length>50?`${(p??"").slice(0,50)}...`:p??"Trống"}},{header:"Status",accessorKey:"status"}],[]),s=j({columns:r,data:i??[],...e,enableBottomToolbar:!0,initialState:{...e.initialState},state:{isLoading:!i},renderRowActions:({row:a})=>t.jsx(A,{sx:{display:"flex",gap:"1rem"},children:t.jsx(C,{title:"Delete",children:t.jsx(M,{color:"error",onClick:()=>{h(a.original.id)},children:t.jsx(I,{})})})}),renderTopToolbarCustomActions:()=>t.jsx(b,{type:"primary",onClick:()=>{c(!0)},children:"Add"})});return t.jsxs(R,{gap:"1rem",children:[t.jsx(S,{table:s}),l&&t.jsx(_,{setIsModalOpen:c,isModalOpen:l,isReload:o,setIsReload:u})]})}function F(){return t.jsx(T,{children:t.jsx(v,{})})}export{F as default};
