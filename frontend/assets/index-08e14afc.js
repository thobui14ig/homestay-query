import{i as y,r as o,j as e,Q as p,e as x,K as h}from"./index-1e77cbba.js";import{T as w,P as g,O as f,U as k,X as j,B as T,S as A,Q as K}from"./index.esm-3b54b7a8.js";import{d as b}from"./token.api-81ff3347.js";import{M,c as C,D as S}from"./toast-b11ea2f7.js";import"./motion-867329ea.js";const R=s=>y.post("/setting/create-keyword",s),B=()=>y.get("/setting/get-keywords"),O=({setIsModalOpen:s,isModalOpen:l,isReload:d,setIsReload:i})=>{const[c,a]=o.useState(""),u=async()=>{if(c.length===0){p.error("Nội dung không được trống!");return}const r=c.split(`
`).map(t=>t.trim()).filter(t=>t.length>0).map(t=>t);try{s(!1),p("Keyword sẽ xuất hiện sau vài giây!"),a("");const t=await R({keywords:r});i(!d),p(t.data.message)}catch(t){C(t)}},m=()=>u();return e.jsx(M,{title:"Add keyword",closable:{"aria-label":"Custom Close Button"},open:l,onOk:()=>m(),onCancel:()=>s(!1),children:e.jsx(w,{onChange:r=>{a(r.target.value)},rows:4})})};function D(){const{optionsReactTableDefault:s}=x(),[l,d]=o.useState(!1),[i,c]=o.useState(null),[a,u]=o.useState(!1);o.useEffect(()=>{(async()=>{const n=await B();c(n.data)})()},[a]);const m=async n=>{p("Xóa thành công!"),await b(n),u(!a)},r=o.useMemo(()=>[{header:"Value",accessorKey:"keyword"}],[]),t=g({columns:r,data:i??[],...s,enableBottomToolbar:!0,initialState:{...s.initialState},state:{isLoading:!i},renderRowActions:({row:n})=>e.jsx(f,{sx:{display:"flex",gap:"1rem"},children:e.jsx(k,{title:"Delete",children:e.jsx(j,{color:"error",onClick:()=>{m(n.original.id)},children:e.jsx(S,{})})})}),renderTopToolbarCustomActions:()=>e.jsx(T,{type:"primary",onClick:()=>{d(!0)},children:"Add"})});return e.jsxs(A,{gap:"1rem",children:[e.jsx(K,{table:t}),l&&e.jsx(O,{setIsModalOpen:d,isModalOpen:l,isReload:a,setIsReload:u})]})}function X(){return e.jsx(h,{children:e.jsx(D,{})})}export{X as default};
