import{r as n,j as e,Q as m,e as g,K as k}from"./index-1e77cbba.js";import{T,P as f,O as j,U as A,X as C,B as M,S as b,Q as O}from"./index.esm-3b54b7a8.js";import{c as R,g as S,d as y}from"./token.api-81ff3347.js";import{M as w,c as B,D as I}from"./toast-b11ea2f7.js";import"./motion-867329ea.js";var h=(t=>(t[t.CRAWL_CMT=1]="CRAWL_CMT",t[t.GET_INFO=2]="GET_INFO",t))(h||{});const v=({setIsModalOpen:t,isModalOpen:l,isReload:i,setIsReload:c})=>{const[u,o]=n.useState(""),d=async()=>{if(u.length===0){m.error("Nội dung không được trống!");return}const r=u.split(`
`).map(s=>s.trim()).filter(s=>s.length>0).map(s=>s);try{t(!1),m("Token sẽ xuất hiện sau vài giây!"),o("");const s=await R({tokens:r,type:h.GET_INFO});c(!i),m(s.data.message)}catch(s){B(s)}},x=()=>d();return e.jsx(w,{title:"Add tokens",closable:{"aria-label":"Custom Close Button"},open:l,onOk:()=>x(),onCancel:()=>t(!1),children:e.jsx(T,{onChange:r=>{o(r.target.value)},rows:4})})};function D(){const{optionsReactTableDefault:t}=g(),[l,i]=n.useState(!1),[c,u]=n.useState(null),[o,d]=n.useState(!1);n.useEffect(()=>{(async()=>{const a=await S();u(a.data)})()},[o]);const x=async a=>{m("Xóa thành công!"),await y(a),d(!o)},r=n.useMemo(()=>[{header:"Value",accessorKey:"tokenValue",Cell:a=>{const p=a.row.original.tokenValue;return p&&p.length>50?`${(p??"").slice(0,50)}...`:p??"Trống"}},{header:"Status",accessorKey:"status"}],[]),s=f({columns:r,data:c??[],...t,enableBottomToolbar:!0,initialState:{...t.initialState},state:{isLoading:!c},renderRowActions:({row:a})=>e.jsx(j,{sx:{display:"flex",gap:"1rem"},children:e.jsx(A,{title:"Delete",children:e.jsx(C,{color:"error",onClick:()=>{x(a.original.id)},children:e.jsx(I,{})})})}),renderTopToolbarCustomActions:()=>e.jsx(M,{type:"primary",onClick:()=>{i(!0)},children:"Add"})});return e.jsxs(b,{gap:"1rem",children:[e.jsx(O,{table:s}),l&&e.jsx(v,{setIsModalOpen:i,isModalOpen:l,isReload:o,setIsReload:d})]})}function F(){return e.jsx(k,{children:e.jsx(D,{})})}export{F as default};
