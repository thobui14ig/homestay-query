import{i as m,r as n,j as t,Q as h,e as g,K as T}from"./index-099867fa.js";import{T as f,P as j,O as A,U as C,X as M,B as b,S as O,Q as R}from"./index.esm-d92ce46b.js";import{M as S,c as y,D as w}from"./toast-0b032897.js";import"./motion-20f55645.js";const B=e=>m.post("/tokens",e),I=()=>m.get("/tokens"),v=e=>m.delete(`/tokens/${e}`);var x=(e=>(e[e.CRAWL_CMT=1]="CRAWL_CMT",e[e.GET_INFO=2]="GET_INFO",e))(x||{});const D=({setIsModalOpen:e,isModalOpen:l,isReload:i,setIsReload:c})=>{const[u,o]=n.useState(""),d=async()=>{if(u.length===0){h.error("Nội dung không được trống!");return}const r=u.split(`
`).map(s=>s.trim()).filter(s=>s.length>0).map(s=>s);try{e(!1),h("Token sẽ xuất hiện sau vài giây!"),o("");const s=await B({tokens:r,type:x.GET_INFO});c(!i),h(s.data.message)}catch(s){y(s)}},k=()=>d();return t.jsx(S,{title:"Add tokens",closable:{"aria-label":"Custom Close Button"},open:l,onOk:()=>k(),onCancel:()=>e(!1),children:t.jsx(f,{onChange:r=>{o(r.target.value)},rows:4})})};function _(){const{optionsReactTableDefault:e}=g(),[l,i]=n.useState(!1),[c,u]=n.useState(null),[o,d]=n.useState(!1);n.useEffect(()=>{(async()=>{const a=await I();u(a.data)})()},[o]);const k=async a=>{h("Xóa thành công!"),await v(a),d(!o)},r=n.useMemo(()=>[{header:"Value",accessorKey:"tokenValue",Cell:a=>{const p=a.row.original.tokenValue;return p&&p.length>50?`${(p??"").slice(0,50)}...`:p??"Trống"}},{header:"Status",accessorKey:"status"}],[]),s=j({columns:r,data:c??[],...e,enableBottomToolbar:!0,initialState:{...e.initialState},state:{isLoading:!c},renderRowActions:({row:a})=>t.jsx(A,{sx:{display:"flex",gap:"1rem"},children:t.jsx(C,{title:"Delete",children:t.jsx(M,{color:"error",onClick:()=>{k(a.original.id)},children:t.jsx(w,{})})})}),renderTopToolbarCustomActions:()=>t.jsx(b,{type:"primary",onClick:()=>{i(!0)},children:"Add"})});return t.jsxs(O,{gap:"1rem",children:[t.jsx(R,{table:s}),l&&t.jsx(D,{setIsModalOpen:i,isModalOpen:l,isReload:o,setIsReload:d})]})}function F(){return t.jsx(T,{children:t.jsx(_,{})})}export{F as default};
